diff --git a/CMakeLists.txt b/CMakeLists.txt
index 438f72d099..ad9fd1e957 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -899,21 +899,18 @@ if(NOT OPTION_AEMU_LIBS_ONLY)
       x86_64 "${ANDROID_QEMU_i386_DEVICES_${ANDROID_TARGET_TAG}}")
     android_add_qemu_headless_executable(
       x86_64 "${ANDROID_QEMU_i386_DEVICES_${ANDROID_TARGET_TAG}}")
-  endif()
+  else()
     android_add_qemu_executable(
       aarch64 "${ANDROID_QEMU_arm_DEVICES_${ANDROID_TARGET_TAG}}")
     android_add_qemu_headless_executable(
       aarch64 "${ANDROID_QEMU_arm_DEVICES_${ANDROID_TARGET_TAG}}")
+  endif()
 
   if(NOT OPTION_MINBUILD)
     android_add_qemu_executable(
       i386 "${ANDROID_QEMU_i386_DEVICES_${ANDROID_TARGET_TAG}}")
-    android_add_qemu_executable(
-      armel "${ANDROID_QEMU_arm_DEVICES_${ANDROID_TARGET_TAG}}")
     android_add_qemu_headless_executable(
       i386 "${ANDROID_QEMU_i386_DEVICES_${ANDROID_TARGET_TAG}}")
-    android_add_qemu_headless_executable(
-      armel "${ANDROID_QEMU_arm_DEVICES_${ANDROID_TARGET_TAG}}")
   endif()
 
   # The tests currently work on linux x86 only.
diff --git a/android-qemu2-glue/config/target-x86/config-target.h b/android-qemu2-glue/config/target-x86/config-target.h
index 76bc1ae2d1..294d9bccac 100644
--- a/android-qemu2-glue/config/target-x86/config-target.h
+++ b/android-qemu2-glue/config/target-x86/config-target.h
@@ -21,7 +21,8 @@
 
 #ifdef __APPLE__
 
-#define CONFIG_HVF 1
+//#define CONFIG_HVF 0
+#undef CONFIG_HVF  
 
 #endif // __APPLE__
 
diff --git a/android-qemu2-glue/config/target-x86_64/config-target.h b/android-qemu2-glue/config/target-x86_64/config-target.h
index 93b388cd11..575eba127a 100644
--- a/android-qemu2-glue/config/target-x86_64/config-target.h
+++ b/android-qemu2-glue/config/target-x86_64/config-target.h
@@ -20,7 +20,8 @@
 
 #ifdef __APPLE__
 
-#define CONFIG_HVF 1
+//#define CONFIG_HVF 1
+#undef CONFIG_HVF
 
 #endif // __APPLE__
 
diff --git a/android/android-emu/android/main-common.c b/android/android-emu/android/main-common.c
index faba6fac5c..fe27c8942c 100644
--- a/android/android-emu/android/main-common.c
+++ b/android/android-emu/android/main-common.c
@@ -1368,7 +1368,7 @@ bool handleCpuAcceleration(AndroidOptions* opts, const AvdInfo* avd,
 #if defined(__APPLE__) && defined(__arm64__)
         if (!strncmp(abi, "arm64", 3)) {
 #else
-        if (!strncmp(abi, "x86", 3)) {
+        if (false) { // enable TCG on x86
 #endif
             dprint("%s: feature check for hvf", __func__);
             // select HVF on Mac if available and we are running on x86
diff --git a/android/build/cmake/android.cmake b/android/build/cmake/android.cmake
index f5781981b6..a1ee0da770 100644
--- a/android/build/cmake/android.cmake
+++ b/android/build/cmake/android.cmake
@@ -1449,6 +1449,8 @@ function(android_build_qemu_variant)
                              PRIVATE ${qemu_build_DEFINITIONS})
   target_link_libraries(${qemu_build_EXE} PRIVATE ${QEMU_COMPLETE_LIB}
                                                   ${qemu_build_LIBRARIES})
+  # disable HVF
+  target_compile_options(${qemu_build_EXE} PRIVATE -UCONFIG_HVF)
 
   # Make the common dependency explicit, as some generators might not detect it
   # properly (Xcode/MSVC native)
diff --git a/android/emulator/CMakeLists.txt b/android/emulator/CMakeLists.txt
index 294fb5386f..5e7b708112 100644
--- a/android/emulator/CMakeLists.txt
+++ b/android/emulator/CMakeLists.txt
@@ -27,11 +27,7 @@ else()
     emulator
     qemu-system-i386
     qemu-system-x86_64
-    qemu-system-armel
-    qemu-system-aarch64
-    qemu-system-armel-headless
     qemu-system-x86_64-headless
-    qemu-system-aarch64-headless
     emulator-crash-service)
 endif()
 
diff --git a/android/emulator/main-emulator.cpp b/android/emulator/main-emulator.cpp
index 29edad0757..957342aafe 100644
--- a/android/emulator/main-emulator.cpp
+++ b/android/emulator/main-emulator.cpp
@@ -318,18 +318,6 @@ int main(int argc, char** argv)
     bool checkLoadable = false;
     bool use_virtio_console = false;
 
-#ifdef __APPLE__
-    if (processIsTranslated()) {
-        fprintf(stderr, "emulator: ERROR: process is translated under Rosetta. Attempting to replace emulator installation.\n");
-        const auto progDirSystem = android::base::System::get()->getProgramDirectory();
-        const auto cmd = PathUtils::join(progDirSystem, "darwin-aarch64-replace.sh");
-        fprintf(stderr, "emulator: Replacing via command: %s (downloading ~120 MB)...\n", cmd.c_str());
-        system(cmd.c_str());
-        fprintf(stderr, "emulator: Replacement done. Please relaunch the emulator. You will also need to be using an Apple Silicon-compatible system image. Check the release updates blog (https://androidstudio.googleblog.com/) for more details.\n");
-        return -1;
-    }
-#endif
-
     const char* qemu_top_dir = nullptr;
     for (int nn = 1; nn < argc; nn++) {
         const char* opt = argv[nn];
diff --git a/android/scripts/unix/gen-android-sdk-toolchain.sh b/android/scripts/unix/gen-android-sdk-toolchain.sh
index a8a2b32254..429cdc0976 100755
--- a/android/scripts/unix/gen-android-sdk-toolchain.sh
+++ b/android/scripts/unix/gen-android-sdk-toolchain.sh
@@ -524,7 +524,7 @@ prepare_build_for_darwin() {
     OSX_DESIRED=12.2
 
     # This is the list of supported SDKs,
-    OSX_SDK_SUPPORTED="${OSX_REQUIRED} 10.15 10.16 11.0 11.1 11.2 11.3 11.4 11.5 11.6 12.0"
+    OSX_SDK_SUPPORTED="${OSX_REQUIRED} 10.15 10.16 11.0 11.1 11.2 11.3 11.4 11.5 11.6 12.0 12.1"
     OSX_XCODE=$(xcodebuild -version | tr '\n' ' ')
     OSX_SDK_INSTALLED_LIST=$(xcodebuild -showsdks 2>/dev/null | \
             egrep --color=never -o " macosx\d+.\d+$" | sed -e "s/.*macosx//g" | sort -n | \
@@ -809,7 +809,7 @@ prepare_build_for_darwin_aarch64() {
 
     OSX_VERSION=$(sw_vers -productVersion)
     OSX_DEPLOYMENT_TARGET=10.16
-    OSX_SDK_SUPPORTED="10.11 10.12 10.13 10.14 10.15 10.16 11.0 11.1 11.2 11.3 11.4 11.5 11.6 12.0"
+    OSX_SDK_SUPPORTED="10.11 10.12 10.13 10.14 10.15 10.16 11.0 11.1 11.2 11.3 11.4 11.5 11.6 12.0 12.1"
     OSX_SDK_INSTALLED_LIST=$(xcodebuild -showsdks 2>/dev/null | \
             grep --color=never macosx | sed -e "s/.*macosx10\.//g" | sort -n | \
             sed -e 's/^/10./g' | tr '\n' ' ')
diff --git a/cmake-main.darwin-x86_64.inc b/cmake-main.darwin-x86_64.inc
index 6a498ea242..71691edf9c 100644
--- a/cmake-main.darwin-x86_64.inc
+++ b/cmake-main.darwin-x86_64.inc
@@ -6,8 +6,6 @@
 # Defines targets:
 #   libqemuutil
 #   qemu-img
-#   qemu-system-aarch64
-#   qemu-system-arm
 #   qemu-system-i386
 #   qemu-system-x86_64
 
@@ -137,14 +135,34 @@ hmp.c
 hw/acpi/acpi_interface.c
 hw/acpi/aml-build.c
 hw/acpi/bios-linker-loader.c
+hw/acpi/core.c
+hw/acpi/cpu.c
+hw/acpi/cpu_hotplug.c
+hw/acpi/ich9.c
+hw/acpi/ipmi.c
+hw/acpi/memory_hotplug.c
+hw/acpi/nvdimm.c
+hw/acpi/pcihp.c
+hw/acpi/piix4.c
+hw/acpi/tco.c
+hw/acpi/vmgenid.c
 hw/audio/ac97.c
+hw/audio/adlib.c
+hw/audio/cs4231a.c
 hw/audio/es1370.c
+hw/audio/fmopl.c
 hw/audio/goldfish_audio.c
+hw/audio/gus.c
+hw/audio/gusemu_hal.c
+hw/audio/gusemu_mixer.c
 hw/audio/hda-codec.c
 hw/audio/intel-hda.c
+hw/audio/pcspk.c
+hw/audio/sb16.c
 hw/audio/soundhw.c
 hw/block/block.c
 hw/block/cdrom.c
+hw/block/fdc.c
 hw/block/hd-geometry.c
 hw/block/nvme.c
 hw/block/pflash_cfi01.c
@@ -154,7 +172,10 @@ hw/bt/hci.c
 hw/bt/hid.c
 hw/bt/l2cap.c
 hw/bt/sdp.c
+hw/char/debugcon.c
 hw/char/ipoctal232.c
+hw/char/parallel-isa.c
+hw/char/parallel.c
 hw/char/serial-isa.c
 hw/char/serial-pci.c
 hw/char/serial.c
@@ -176,31 +197,55 @@ hw/core/reset.c
 hw/core/split-irq.c
 hw/core/sysbus.c
 hw/cpu/core.c
+hw/display/cirrus_vga.c
 hw/display/edid-generate.c
 hw/display/framebuffer.c
 hw/display/goldfish_fb.c
+hw/display/vga-isa.c
 hw/display/vga-pci.c
+hw/display/vmware_vga.c
+hw/dma/i8257.c
 hw/i2c/core.c
+hw/i2c/pm_smbus.c
 hw/i2c/smbus.c
 hw/i2c/smbus_eeprom.c
+hw/i2c/smbus_ich9.c
 hw/ide/ahci.c
 hw/ide/atapi.c
 hw/ide/core.c
 hw/ide/ich.c
+hw/ide/isa.c
 hw/ide/pci.c
+hw/ide/piix.c
 hw/ide/qdev.c
 hw/input/hid.c
+hw/input/pckbd.c
 hw/input/ps2.c
 hw/input/virtio-input-hid.c
 hw/input/virtio-input.c
+hw/intc/i8259.c
+hw/intc/i8259_common.c
 hw/intc/intc.c
+hw/intc/ioapic_common.c
 hw/ipack/ipack.c
 hw/ipack/tpci200.c
+hw/ipmi/ipmi.c
+hw/ipmi/ipmi_bmc_extern.c
+hw/ipmi/ipmi_bmc_sim.c
+hw/ipmi/isa_ipmi_bt.c
+hw/ipmi/isa_ipmi_kcs.c
+hw/isa/apm.c
 hw/isa/isa-bus.c
 hw/isa/isa-superio.c
 hw/isa/smc37c669-superio.c
+hw/mem/nvdimm.c
+hw/mem/pc-dimm.c
+hw/misc/applesmc.c
+hw/misc/debugexit.c
 hw/misc/edu.c
+hw/misc/pc-testdev.c
 hw/misc/pci-testdev.c
+hw/misc/sga.c
 hw/misc/unimp.c
 hw/misc/vmcoreinfo.c
 hw/net/can/can_kvaser_pci.c
@@ -208,6 +253,7 @@ hw/net/can/can_mioe3680_pci.c
 hw/net/can/can_pcm3680_pci.c
 hw/net/can/can_sja1000.c
 hw/net/eepro100.c
+hw/net/ne2000-isa.c
 hw/net/ne2000.c
 hw/net/net_rx_pkt.c
 hw/net/net_tx_pkt.c
@@ -219,6 +265,7 @@ hw/net/rocker/rocker_fp.c
 hw/net/rocker/rocker_of_dpa.c
 hw/net/rocker/rocker_world.c
 hw/net/rtl8139.c
+hw/net/vmxnet3.c
 hw/nvram/chrp_nvram.c
 hw/nvram/eeprom93xx.c
 hw/nvram/eeprom_at24c.c
@@ -227,11 +274,14 @@ hw/pci-bridge/gen_pcie_root_port.c
 hw/pci-bridge/i82801b11.c
 hw/pci-bridge/ioh3420.c
 hw/pci-bridge/pci_bridge_dev.c
+hw/pci-bridge/pci_expander_bridge.c
 hw/pci-bridge/pcie_pci_bridge.c
 hw/pci-bridge/pcie_root_port.c
 hw/pci-bridge/xio3130_downstream.c
 hw/pci-bridge/xio3130_upstream.c
 hw/pci-host/pam.c
+hw/pci-host/piix.c
+hw/pci-host/q35.c
 hw/pci/msi.c
 hw/pci/msix.c
 hw/pci/pci.c
@@ -260,7 +310,13 @@ hw/sd/sd.c
 hw/sd/sdhci.c
 hw/sd/sdmmc-internal.c
 hw/smbios/smbios.c
+hw/smbios/smbios_type_38.c
+hw/timer/hpet.c
+hw/timer/i8254.c
+hw/timer/i8254_common.c
+hw/tpm/tpm_crb.c
 hw/tpm/tpm_emulator.c
+hw/tpm/tpm_tis.c
 hw/tpm/tpm_util.c
 hw/usb/bus.c
 hw/usb/combined-packet.c
@@ -293,6 +349,7 @@ hw/virtio/virtio-pci.c
 hw/virtio/virtio-rng.c
 hw/watchdog/watchdog.c
 hw/watchdog/wdt_i6300esb.c
+hw/watchdog/wdt_ib700.c
 io/channel-buffer.c
 io/channel-command.c
 io/channel-file.c
@@ -793,683 +850,6 @@ set(qemu-img_generated_sources ""
 ${ANDROID_AUTOGEN}/)
 set(qemu-img_dep libqemuutil)
 
-## TARGET: qemu-system-aarch64 ##
-set(qemu-system-aarch64_sources ""
-accel/accel.c
-accel/stubs/gvm-stub.c
-accel/stubs/hvf-stub.c
-accel/stubs/kvm-stub.c
-accel/stubs/whpx-stub.c
-accel/tcg/cpu-exec-common.c
-accel/tcg/cpu-exec.c
-accel/tcg/cputlb.c
-accel/tcg/tcg-all.c
-accel/tcg/tcg-runtime-gvec.c
-accel/tcg/tcg-runtime.c
-accel/tcg/translate-all.c
-accel/tcg/translator.c
-arch_init.c
-balloon.c
-cpus.c
-disas.c
-disas/arm-a64.cc
-disas/arm.c
-disas/libvixl/vixl/a64/decoder-a64.cc
-disas/libvixl/vixl/a64/disasm-a64.cc
-disas/libvixl/vixl/a64/instructions-a64.cc
-disas/libvixl/vixl/compiler-intrinsics.cc
-disas/libvixl/vixl/utils.cc
-dump.c
-exec.c
-fpu/softfloat.c
-gdbstub.c
-hw/acpi/acpi-stub.c
-hw/acpi/ipmi-stub.c
-hw/adc/stm32f2xx_adc.c
-hw/arm/allwinner-a10.c
-hw/arm/armv7m.c
-hw/arm/aspeed.c
-hw/arm/aspeed_soc.c
-hw/arm/bcm2835_peripherals.c
-hw/arm/bcm2836.c
-hw/arm/boot.c
-hw/arm/collie.c
-hw/arm/cubieboard.c
-hw/arm/digic.c
-hw/arm/digic_boards.c
-hw/arm/exynos4210.c
-hw/arm/exynos4_boards.c
-hw/arm/fsl-imx25.c
-hw/arm/fsl-imx31.c
-hw/arm/fsl-imx6.c
-hw/arm/fsl-imx7.c
-hw/arm/gumstix.c
-hw/arm/highbank.c
-hw/arm/imx25_pdk.c
-hw/arm/integratorcp.c
-hw/arm/iotkit.c
-hw/arm/kzm.c
-hw/arm/mainstone.c
-hw/arm/mcimx7d-sabre.c
-hw/arm/mps2-tz.c
-hw/arm/mps2.c
-hw/arm/msf2-soc.c
-hw/arm/msf2-som.c
-hw/arm/musicpal.c
-hw/arm/netduino2.c
-hw/arm/nseries.c
-hw/arm/omap1.c
-hw/arm/omap2.c
-hw/arm/omap_sx1.c
-hw/arm/palm.c
-hw/arm/pxa2xx.c
-hw/arm/pxa2xx_gpio.c
-hw/arm/pxa2xx_pic.c
-hw/arm/ranchu.c
-hw/arm/raspi.c
-hw/arm/realview.c
-hw/arm/sabrelite.c
-hw/arm/spitz.c
-hw/arm/stellaris.c
-hw/arm/stm32f205_soc.c
-hw/arm/strongarm.c
-hw/arm/sysbus-fdt.c
-hw/arm/tosa.c
-hw/arm/versatilepb.c
-hw/arm/vexpress.c
-hw/arm/virt-acpi-build.c
-hw/arm/virt.c
-hw/arm/xilinx_zynq.c
-hw/arm/xlnx-zcu102.c
-hw/arm/xlnx-zynqmp.c
-hw/arm/z2.c
-hw/audio/lm4549.c
-hw/audio/marvell_88w8618.c
-hw/audio/pl041.c
-hw/audio/wm8750.c
-hw/block/dataplane/virtio-blk.c
-hw/block/ecc.c
-hw/block/m25p80.c
-hw/block/nand.c
-hw/block/onenand.c
-hw/block/pflash_cfi02.c
-hw/block/virtio-blk.c
-hw/char/bcm2835_aux.c
-hw/char/cadence_uart.c
-hw/char/cmsdk-apb-uart.c
-hw/char/digic-uart.c
-hw/char/exynos4210_uart.c
-hw/char/goldfish_tty.c
-hw/char/imx_serial.c
-hw/char/omap_uart.c
-hw/char/pl011.c
-hw/char/stm32f2xx_usart.c
-hw/char/virtio-serial-bus.c
-hw/core/generic-loader.c
-hw/core/null-machine.c
-hw/core/platform-bus.c
-hw/core/ptimer.c
-hw/core/stream.c
-hw/cpu/a15mpcore.c
-hw/cpu/a9mpcore.c
-hw/cpu/arm11mpcore.c
-hw/cpu/realview_mpcore.c
-hw/display/ads7846.c
-hw/display/bcm2835_fb.c
-hw/display/blizzard.c
-hw/display/dpcd.c
-hw/display/exynos4210_fimd.c
-hw/display/omap_dss.c
-hw/display/omap_lcdc.c
-hw/display/pl110.c
-hw/display/pxa2xx_lcd.c
-hw/display/sii9022.c
-hw/display/ssd0303.c
-hw/display/ssd0323.c
-hw/display/tc6393xb.c
-hw/display/vga.c
-hw/display/virtio-gpu-3d.c
-hw/display/virtio-gpu-pci.c
-hw/display/virtio-gpu.c
-hw/display/xlnx_dp.c
-hw/dma/bcm2835_dma.c
-hw/dma/omap_dma.c
-hw/dma/pl080.c
-hw/dma/pl330.c
-hw/dma/pxa2xx_dma.c
-hw/dma/soc_dma.c
-hw/dma/xilinx_axidma.c
-hw/dma/xlnx-zynq-devcfg.c
-hw/dma/xlnx_dpdma.c
-hw/gpio/bcm2835_gpio.c
-hw/gpio/gpio_key.c
-hw/gpio/imx_gpio.c
-hw/gpio/max7310.c
-hw/gpio/omap_gpio.c
-hw/gpio/pl061.c
-hw/gpio/zaurus.c
-hw/i2c/aspeed_i2c.c
-hw/i2c/bitbang_i2c.c
-hw/i2c/exynos4210_i2c.c
-hw/i2c/i2c-ddc.c
-hw/i2c/imx_i2c.c
-hw/i2c/omap_i2c.c
-hw/i2c/versatile_i2c.c
-hw/ide/ahci-allwinner.c
-hw/ide/microdrive.c
-hw/input/goldfish_events.c
-hw/input/goldfish_events_common.c
-hw/input/goldfish_rotary.c
-hw/input/lm832x.c
-hw/input/pl050.c
-hw/input/pxa2xx_keypad.c
-hw/input/stellaris_input.c
-hw/input/tsc2005.c
-hw/input/tsc210x.c
-hw/intc/allwinner-a10-pic.c
-hw/intc/arm_gic.c
-hw/intc/arm_gic_common.c
-hw/intc/arm_gicv2m.c
-hw/intc/arm_gicv3.c
-hw/intc/arm_gicv3_common.c
-hw/intc/arm_gicv3_cpuif.c
-hw/intc/arm_gicv3_dist.c
-hw/intc/arm_gicv3_its_common.c
-hw/intc/arm_gicv3_redist.c
-hw/intc/armv7m_nvic.c
-hw/intc/aspeed_vic.c
-hw/intc/bcm2835_ic.c
-hw/intc/bcm2836_control.c
-hw/intc/exynos4210_combiner.c
-hw/intc/exynos4210_gic.c
-hw/intc/goldfish_pic.c
-hw/intc/imx_avic.c
-hw/intc/imx_gpcv2.c
-hw/intc/omap_intc.c
-hw/intc/pl190.c
-hw/intc/realview_gic.c
-hw/intc/xlnx-pmu-iomod-intc.c
-hw/intc/xlnx-zynqmp-ipi.c
-hw/misc/a9scu.c
-hw/misc/arm11scu.c
-hw/misc/arm_integrator_debug.c
-hw/misc/arm_l2x0.c
-hw/misc/arm_sysctl.c
-hw/misc/aspeed_scu.c
-hw/misc/aspeed_sdmc.c
-hw/misc/auxbus.c
-hw/misc/bcm2835_mbox.c
-hw/misc/bcm2835_property.c
-hw/misc/bcm2835_rng.c
-hw/misc/cbus.c
-hw/misc/exynos4210_clk.c
-hw/misc/exynos4210_pmu.c
-hw/misc/exynos4210_rng.c
-hw/misc/goldfish_battery.c
-hw/misc/goldfish_pipe.c
-hw/misc/goldfish_pstore.c
-hw/misc/goldfish_sync.c
-hw/misc/imx25_ccm.c
-hw/misc/imx2_wdt.c
-hw/misc/imx31_ccm.c
-hw/misc/imx6_ccm.c
-hw/misc/imx6_src.c
-hw/misc/imx7_ccm.c
-hw/misc/imx7_gpr.c
-hw/misc/imx7_snvs.c
-hw/misc/imx_ccm.c
-hw/misc/iotkit-secctl.c
-hw/misc/max111x.c
-hw/misc/mmio_interface.c
-hw/misc/mps2-fpgaio.c
-hw/misc/mps2-scc.c
-hw/misc/msf2-sysreg.c
-hw/misc/mst_fpga.c
-hw/misc/omap_clk.c
-hw/misc/omap_gpmc.c
-hw/misc/omap_l4.c
-hw/misc/omap_sdrc.c
-hw/misc/omap_tap.c
-hw/misc/stm32f2xx_syscfg.c
-hw/misc/tmp105.c
-hw/misc/tmp421.c
-hw/misc/tz-ppc.c
-hw/misc/zynq-xadc.c
-hw/misc/zynq_slcr.c
-hw/net/allwinner_emac.c
-hw/net/cadence_gem.c
-hw/net/ftgmac100.c
-hw/net/imx_fec.c
-hw/net/lan9118.c
-hw/net/smc91c111.c
-hw/net/stellaris_enet.c
-hw/net/vhost_net.c
-hw/net/virtio-net.c
-hw/net/xgmac.c
-hw/net/xilinx_axienet.c
-hw/pci-host/designware.c
-hw/pci-host/gpex.c
-hw/pci-host/versatile.c
-hw/pcmcia/pxa2xx.c
-hw/scsi/virtio-scsi-dataplane.c
-hw/scsi/virtio-scsi.c
-hw/sd/bcm2835_sdhost.c
-hw/sd/omap_mmc.c
-hw/sd/pl181.c
-hw/sd/pxa2xx_mmci.c
-hw/sd/ssi-sd.c
-hw/smbios/smbios_type_38-stub.c
-hw/ssi/aspeed_smc.c
-hw/ssi/imx_spi.c
-hw/ssi/mss-spi.c
-hw/ssi/omap_spi.c
-hw/ssi/pl022.c
-hw/ssi/ssi.c
-hw/ssi/stm32f2xx_spi.c
-hw/ssi/xilinx_spips.c
-hw/timer/a9gtimer.c
-hw/timer/allwinner-a10-pit.c
-hw/timer/arm_mptimer.c
-hw/timer/arm_timer.c
-hw/timer/armv7m_systick.c
-hw/timer/aspeed_timer.c
-hw/timer/cadence_ttc.c
-hw/timer/cmsdk-apb-timer.c
-hw/timer/digic-timer.c
-hw/timer/ds1338.c
-hw/timer/exynos4210_mct.c
-hw/timer/exynos4210_pwm.c
-hw/timer/exynos4210_rtc.c
-hw/timer/goldfish_timer.c
-hw/timer/imx_epit.c
-hw/timer/imx_gpt.c
-hw/timer/mss-timer.c
-hw/timer/omap_gptimer.c
-hw/timer/omap_synctimer.c
-hw/timer/pl031.c
-hw/timer/pxa2xx_timer.c
-hw/timer/stm32f2xx_timer.c
-hw/timer/twl92230.c
-hw/timer/xlnx-zynqmp-rtc.c
-hw/usb/chipidea.c
-hw/usb/hcd-ehci-sysbus.c
-hw/usb/hcd-musb.c
-hw/usb/tusb6010.c
-hw/virtio/virtio-balloon.c
-hw/virtio/virtio-crypto-pci.c
-hw/virtio/virtio-crypto.c
-hw/virtio/virtio.c
-hw/watchdog/wdt_aspeed.c
-ioport.c
-memory.c
-memory_mapping.c
-migration/ram.c
-monitor.c
-numa.c
-qtest.c
-target/arm/arch_dump.c
-target/arm/arm-powerctl.c
-target/arm/arm-semi.c
-target/arm/cpu.c
-target/arm/cpu64.c
-target/arm/crypto_helper.c
-target/arm/gdbstub.c
-target/arm/gdbstub64.c
-target/arm/helper-a64.c
-target/arm/helper.c
-target/arm/iwmmxt_helper.c
-target/arm/kvm-stub.c
-target/arm/machine.c
-target/arm/monitor.c
-target/arm/neon_helper.c
-target/arm/op_helper.c
-target/arm/psci.c
-target/arm/translate-a64.c
-target/arm/translate.c
-target/arm/vec_helper.c
-tcg/optimize.c
-tcg/tcg-common.c
-tcg/tcg-op-gvec.c
-tcg/tcg-op-vec.c
-tcg/tcg-op.c
-tcg/tcg.c
-trace/control-target.c)
-set(qemu-system-aarch64_generated_sources ""
-${ANDROID_AUTOGEN}/trace/generated-helpers.c)
-set(qemu-system-aarch64_dep libqemuutil qemu2-shared)
-
-## TARGET: qemu-system-arm ##
-set(qemu-system-arm_sources ""
-accel/accel.c
-accel/stubs/gvm-stub.c
-accel/stubs/hvf-stub.c
-accel/stubs/kvm-stub.c
-accel/stubs/whpx-stub.c
-accel/tcg/cpu-exec-common.c
-accel/tcg/cpu-exec.c
-accel/tcg/cputlb.c
-accel/tcg/tcg-all.c
-accel/tcg/tcg-runtime-gvec.c
-accel/tcg/tcg-runtime.c
-accel/tcg/translate-all.c
-accel/tcg/translator.c
-arch_init.c
-balloon.c
-cpus.c
-disas.c
-disas/arm-a64.cc
-disas/arm.c
-disas/libvixl/vixl/a64/decoder-a64.cc
-disas/libvixl/vixl/a64/disasm-a64.cc
-disas/libvixl/vixl/a64/instructions-a64.cc
-disas/libvixl/vixl/compiler-intrinsics.cc
-disas/libvixl/vixl/utils.cc
-dump.c
-exec.c
-fpu/softfloat.c
-gdbstub.c
-hw/acpi/acpi-stub.c
-hw/acpi/ipmi-stub.c
-hw/adc/stm32f2xx_adc.c
-hw/arm/allwinner-a10.c
-hw/arm/armv7m.c
-hw/arm/aspeed.c
-hw/arm/aspeed_soc.c
-hw/arm/bcm2835_peripherals.c
-hw/arm/bcm2836.c
-hw/arm/boot.c
-hw/arm/collie.c
-hw/arm/cubieboard.c
-hw/arm/digic.c
-hw/arm/digic_boards.c
-hw/arm/exynos4210.c
-hw/arm/exynos4_boards.c
-hw/arm/fsl-imx25.c
-hw/arm/fsl-imx31.c
-hw/arm/fsl-imx6.c
-hw/arm/fsl-imx7.c
-hw/arm/gumstix.c
-hw/arm/highbank.c
-hw/arm/imx25_pdk.c
-hw/arm/integratorcp.c
-hw/arm/iotkit.c
-hw/arm/kzm.c
-hw/arm/mainstone.c
-hw/arm/mcimx7d-sabre.c
-hw/arm/mps2-tz.c
-hw/arm/mps2.c
-hw/arm/msf2-soc.c
-hw/arm/msf2-som.c
-hw/arm/musicpal.c
-hw/arm/netduino2.c
-hw/arm/nseries.c
-hw/arm/omap1.c
-hw/arm/omap2.c
-hw/arm/omap_sx1.c
-hw/arm/palm.c
-hw/arm/pxa2xx.c
-hw/arm/pxa2xx_gpio.c
-hw/arm/pxa2xx_pic.c
-hw/arm/ranchu.c
-hw/arm/raspi.c
-hw/arm/realview.c
-hw/arm/sabrelite.c
-hw/arm/spitz.c
-hw/arm/stellaris.c
-hw/arm/stm32f205_soc.c
-hw/arm/strongarm.c
-hw/arm/sysbus-fdt.c
-hw/arm/tosa.c
-hw/arm/versatilepb.c
-hw/arm/vexpress.c
-hw/arm/virt-acpi-build.c
-hw/arm/virt.c
-hw/arm/xilinx_zynq.c
-hw/arm/z2.c
-hw/audio/lm4549.c
-hw/audio/marvell_88w8618.c
-hw/audio/pl041.c
-hw/audio/wm8750.c
-hw/block/dataplane/virtio-blk.c
-hw/block/ecc.c
-hw/block/m25p80.c
-hw/block/nand.c
-hw/block/onenand.c
-hw/block/pflash_cfi02.c
-hw/block/virtio-blk.c
-hw/char/bcm2835_aux.c
-hw/char/cadence_uart.c
-hw/char/cmsdk-apb-uart.c
-hw/char/digic-uart.c
-hw/char/exynos4210_uart.c
-hw/char/goldfish_tty.c
-hw/char/imx_serial.c
-hw/char/omap_uart.c
-hw/char/pl011.c
-hw/char/stm32f2xx_usart.c
-hw/char/virtio-serial-bus.c
-hw/core/generic-loader.c
-hw/core/null-machine.c
-hw/core/platform-bus.c
-hw/core/ptimer.c
-hw/core/stream.c
-hw/cpu/a15mpcore.c
-hw/cpu/a9mpcore.c
-hw/cpu/arm11mpcore.c
-hw/cpu/realview_mpcore.c
-hw/display/ads7846.c
-hw/display/bcm2835_fb.c
-hw/display/blizzard.c
-hw/display/exynos4210_fimd.c
-hw/display/omap_dss.c
-hw/display/omap_lcdc.c
-hw/display/pl110.c
-hw/display/pxa2xx_lcd.c
-hw/display/sii9022.c
-hw/display/ssd0303.c
-hw/display/ssd0323.c
-hw/display/tc6393xb.c
-hw/display/vga.c
-hw/display/virtio-gpu-3d.c
-hw/display/virtio-gpu-pci.c
-hw/display/virtio-gpu.c
-hw/dma/bcm2835_dma.c
-hw/dma/omap_dma.c
-hw/dma/pl080.c
-hw/dma/pl330.c
-hw/dma/pxa2xx_dma.c
-hw/dma/soc_dma.c
-hw/dma/xilinx_axidma.c
-hw/dma/xlnx-zynq-devcfg.c
-hw/gpio/bcm2835_gpio.c
-hw/gpio/gpio_key.c
-hw/gpio/imx_gpio.c
-hw/gpio/max7310.c
-hw/gpio/omap_gpio.c
-hw/gpio/pl061.c
-hw/gpio/zaurus.c
-hw/i2c/aspeed_i2c.c
-hw/i2c/bitbang_i2c.c
-hw/i2c/exynos4210_i2c.c
-hw/i2c/i2c-ddc.c
-hw/i2c/imx_i2c.c
-hw/i2c/omap_i2c.c
-hw/i2c/versatile_i2c.c
-hw/ide/ahci-allwinner.c
-hw/ide/microdrive.c
-hw/input/goldfish_events.c
-hw/input/goldfish_events_common.c
-hw/input/goldfish_rotary.c
-hw/input/lm832x.c
-hw/input/pl050.c
-hw/input/pxa2xx_keypad.c
-hw/input/stellaris_input.c
-hw/input/tsc2005.c
-hw/input/tsc210x.c
-hw/intc/allwinner-a10-pic.c
-hw/intc/arm_gic.c
-hw/intc/arm_gic_common.c
-hw/intc/arm_gicv2m.c
-hw/intc/arm_gicv3.c
-hw/intc/arm_gicv3_common.c
-hw/intc/arm_gicv3_cpuif.c
-hw/intc/arm_gicv3_dist.c
-hw/intc/arm_gicv3_its_common.c
-hw/intc/arm_gicv3_redist.c
-hw/intc/armv7m_nvic.c
-hw/intc/aspeed_vic.c
-hw/intc/bcm2835_ic.c
-hw/intc/bcm2836_control.c
-hw/intc/exynos4210_combiner.c
-hw/intc/exynos4210_gic.c
-hw/intc/goldfish_pic.c
-hw/intc/imx_avic.c
-hw/intc/imx_gpcv2.c
-hw/intc/omap_intc.c
-hw/intc/pl190.c
-hw/intc/realview_gic.c
-hw/misc/a9scu.c
-hw/misc/arm11scu.c
-hw/misc/arm_integrator_debug.c
-hw/misc/arm_l2x0.c
-hw/misc/arm_sysctl.c
-hw/misc/aspeed_scu.c
-hw/misc/aspeed_sdmc.c
-hw/misc/bcm2835_mbox.c
-hw/misc/bcm2835_property.c
-hw/misc/bcm2835_rng.c
-hw/misc/cbus.c
-hw/misc/exynos4210_clk.c
-hw/misc/exynos4210_pmu.c
-hw/misc/exynos4210_rng.c
-hw/misc/goldfish_battery.c
-hw/misc/goldfish_pipe.c
-hw/misc/goldfish_pstore.c
-hw/misc/goldfish_sync.c
-hw/misc/imx25_ccm.c
-hw/misc/imx2_wdt.c
-hw/misc/imx31_ccm.c
-hw/misc/imx6_ccm.c
-hw/misc/imx6_src.c
-hw/misc/imx7_ccm.c
-hw/misc/imx7_gpr.c
-hw/misc/imx7_snvs.c
-hw/misc/imx_ccm.c
-hw/misc/iotkit-secctl.c
-hw/misc/max111x.c
-hw/misc/mmio_interface.c
-hw/misc/mps2-fpgaio.c
-hw/misc/mps2-scc.c
-hw/misc/msf2-sysreg.c
-hw/misc/mst_fpga.c
-hw/misc/omap_clk.c
-hw/misc/omap_gpmc.c
-hw/misc/omap_l4.c
-hw/misc/omap_sdrc.c
-hw/misc/omap_tap.c
-hw/misc/stm32f2xx_syscfg.c
-hw/misc/tmp105.c
-hw/misc/tmp421.c
-hw/misc/tz-ppc.c
-hw/misc/zynq-xadc.c
-hw/misc/zynq_slcr.c
-hw/net/allwinner_emac.c
-hw/net/cadence_gem.c
-hw/net/ftgmac100.c
-hw/net/imx_fec.c
-hw/net/lan9118.c
-hw/net/smc91c111.c
-hw/net/stellaris_enet.c
-hw/net/vhost_net.c
-hw/net/virtio-net.c
-hw/net/xgmac.c
-hw/net/xilinx_axienet.c
-hw/pci-host/designware.c
-hw/pci-host/gpex.c
-hw/pci-host/versatile.c
-hw/pcmcia/pxa2xx.c
-hw/scsi/virtio-scsi-dataplane.c
-hw/scsi/virtio-scsi.c
-hw/sd/bcm2835_sdhost.c
-hw/sd/omap_mmc.c
-hw/sd/pl181.c
-hw/sd/pxa2xx_mmci.c
-hw/sd/ssi-sd.c
-hw/smbios/smbios_type_38-stub.c
-hw/ssi/aspeed_smc.c
-hw/ssi/imx_spi.c
-hw/ssi/mss-spi.c
-hw/ssi/omap_spi.c
-hw/ssi/pl022.c
-hw/ssi/ssi.c
-hw/ssi/stm32f2xx_spi.c
-hw/ssi/xilinx_spips.c
-hw/timer/a9gtimer.c
-hw/timer/allwinner-a10-pit.c
-hw/timer/arm_mptimer.c
-hw/timer/arm_timer.c
-hw/timer/armv7m_systick.c
-hw/timer/aspeed_timer.c
-hw/timer/cadence_ttc.c
-hw/timer/cmsdk-apb-timer.c
-hw/timer/digic-timer.c
-hw/timer/ds1338.c
-hw/timer/exynos4210_mct.c
-hw/timer/exynos4210_pwm.c
-hw/timer/exynos4210_rtc.c
-hw/timer/goldfish_timer.c
-hw/timer/imx_epit.c
-hw/timer/imx_gpt.c
-hw/timer/mss-timer.c
-hw/timer/omap_gptimer.c
-hw/timer/omap_synctimer.c
-hw/timer/pl031.c
-hw/timer/pxa2xx_timer.c
-hw/timer/stm32f2xx_timer.c
-hw/timer/twl92230.c
-hw/usb/chipidea.c
-hw/usb/hcd-ehci-sysbus.c
-hw/usb/hcd-musb.c
-hw/usb/tusb6010.c
-hw/virtio/virtio-balloon.c
-hw/virtio/virtio-crypto-pci.c
-hw/virtio/virtio-crypto.c
-hw/virtio/virtio.c
-hw/watchdog/wdt_aspeed.c
-ioport.c
-memory.c
-memory_mapping.c
-migration/ram.c
-monitor.c
-numa.c
-qtest.c
-target/arm/arch_dump.c
-target/arm/arm-powerctl.c
-target/arm/arm-semi.c
-target/arm/cpu.c
-target/arm/crypto_helper.c
-target/arm/gdbstub.c
-target/arm/helper.c
-target/arm/iwmmxt_helper.c
-target/arm/kvm-stub.c
-target/arm/machine.c
-target/arm/monitor.c
-target/arm/neon_helper.c
-target/arm/op_helper.c
-target/arm/psci.c
-target/arm/translate.c
-target/arm/vec_helper.c
-tcg/optimize.c
-tcg/tcg-common.c
-tcg/tcg-op-gvec.c
-tcg/tcg-op-vec.c
-tcg/tcg-op.c
-tcg/tcg.c
-trace/control-target.c)
-set(qemu-system-arm_generated_sources ""
-${ANDROID_AUTOGEN}/trace/generated-helpers.c)
-set(qemu-system-arm_dep libqemuutil qemu2-shared)
-
 ## TARGET: qemu-system-i386 ##
 set(qemu-system-i386_sources ""
 accel/accel.c
@@ -1492,46 +872,17 @@ dump.c
 exec.c
 fpu/softfloat.c
 gdbstub.c
-hw/acpi/core.c
-hw/acpi/cpu.c
-hw/acpi/cpu_hotplug.c
-hw/acpi/ich9.c
-hw/acpi/ipmi.c
-hw/acpi/memory_hotplug.c
-hw/acpi/nvdimm.c
-hw/acpi/pcihp.c
-hw/acpi/piix4.c
-hw/acpi/tco.c
-hw/acpi/vmgenid.c
-hw/audio/adlib.c
-hw/audio/cs4231a.c
-hw/audio/fmopl.c
-hw/audio/gus.c
-hw/audio/gusemu_hal.c
-hw/audio/gusemu_mixer.c
-hw/audio/pcspk.c
-hw/audio/sb16.c
 hw/block/dataplane/virtio-blk.c
-hw/block/fdc.c
 hw/block/virtio-blk.c
-hw/char/debugcon.c
 hw/char/goldfish_tty.c
-hw/char/parallel-isa.c
-hw/char/parallel.c
 hw/char/virtio-serial-bus.c
 hw/core/generic-loader.c
 hw/core/null-machine.c
-hw/display/cirrus_vga.c
-hw/display/vga-isa.c
 hw/display/vga.c
 hw/display/virtio-gpu-3d.c
 hw/display/virtio-gpu-pci.c
 hw/display/virtio-gpu.c
 hw/display/virtio-vga.c
-hw/display/vmware_vga.c
-hw/dma/i8257.c
-hw/i2c/pm_smbus.c
-hw/i2c/smbus_ich9.c
 hw/i386/amd_iommu.c
 hw/i386/intel_iommu.c
 hw/i386/kvmvapic.c
@@ -1542,60 +893,30 @@ hw/i386/pc_sysfw.c
 hw/i386/vmmouse.c
 hw/i386/vmport.c
 hw/i386/x86-iommu.c
-hw/ide/isa.c
-hw/ide/piix.c
 hw/input/goldfish_events.c
 hw/input/goldfish_events_common.c
 hw/input/goldfish_rotary.c
-hw/input/pckbd.c
 hw/intc/apic.c
 hw/intc/apic_common.c
 hw/intc/goldfish_pic.c
-hw/intc/i8259.c
-hw/intc/i8259_common.c
 hw/intc/ioapic.c
-hw/intc/ioapic_common.c
-hw/ipmi/ipmi.c
-hw/ipmi/ipmi_bmc_extern.c
-hw/ipmi/ipmi_bmc_sim.c
-hw/ipmi/isa_ipmi_bt.c
-hw/ipmi/isa_ipmi_kcs.c
-hw/isa/apm.c
 hw/isa/lpc_ich9.c
-hw/mem/nvdimm.c
-hw/mem/pc-dimm.c
-hw/misc/applesmc.c
-hw/misc/debugexit.c
 hw/misc/goldfish_battery.c
 hw/misc/goldfish_pipe.c
 hw/misc/goldfish_pstore.c
 hw/misc/goldfish_sync.c
 hw/misc/mmio_interface.c
-hw/misc/pc-testdev.c
 hw/misc/pvpanic.c
-hw/misc/sga.c
-hw/net/ne2000-isa.c
 hw/net/vhost_net.c
 hw/net/virtio-net.c
-hw/net/vmxnet3.c
-hw/pci-bridge/pci_expander_bridge.c
-hw/pci-host/piix.c
-hw/pci-host/q35.c
 hw/scsi/virtio-scsi-dataplane.c
 hw/scsi/virtio-scsi.c
-hw/smbios/smbios_type_38.c
 hw/timer/goldfish_timer.c
-hw/timer/hpet.c
-hw/timer/i8254.c
-hw/timer/i8254_common.c
 hw/timer/mc146818rtc.c
-hw/tpm/tpm_crb.c
-hw/tpm/tpm_tis.c
 hw/virtio/virtio-balloon.c
 hw/virtio/virtio-crypto-pci.c
 hw/virtio/virtio-crypto.c
 hw/virtio/virtio.c
-hw/watchdog/wdt_ib700.c
 ioport.c
 memory.c
 memory_mapping.c
@@ -1670,46 +991,17 @@ dump.c
 exec.c
 fpu/softfloat.c
 gdbstub.c
-hw/acpi/core.c
-hw/acpi/cpu.c
-hw/acpi/cpu_hotplug.c
-hw/acpi/ich9.c
-hw/acpi/ipmi.c
-hw/acpi/memory_hotplug.c
-hw/acpi/nvdimm.c
-hw/acpi/pcihp.c
-hw/acpi/piix4.c
-hw/acpi/tco.c
-hw/acpi/vmgenid.c
-hw/audio/adlib.c
-hw/audio/cs4231a.c
-hw/audio/fmopl.c
-hw/audio/gus.c
-hw/audio/gusemu_hal.c
-hw/audio/gusemu_mixer.c
-hw/audio/pcspk.c
-hw/audio/sb16.c
 hw/block/dataplane/virtio-blk.c
-hw/block/fdc.c
 hw/block/virtio-blk.c
-hw/char/debugcon.c
 hw/char/goldfish_tty.c
-hw/char/parallel-isa.c
-hw/char/parallel.c
 hw/char/virtio-serial-bus.c
 hw/core/generic-loader.c
 hw/core/null-machine.c
-hw/display/cirrus_vga.c
-hw/display/vga-isa.c
 hw/display/vga.c
 hw/display/virtio-gpu-3d.c
 hw/display/virtio-gpu-pci.c
 hw/display/virtio-gpu.c
 hw/display/virtio-vga.c
-hw/display/vmware_vga.c
-hw/dma/i8257.c
-hw/i2c/pm_smbus.c
-hw/i2c/smbus_ich9.c
 hw/i386/amd_iommu.c
 hw/i386/intel_iommu.c
 hw/i386/kvmvapic.c
@@ -1720,60 +1012,30 @@ hw/i386/pc_sysfw.c
 hw/i386/vmmouse.c
 hw/i386/vmport.c
 hw/i386/x86-iommu.c
-hw/ide/isa.c
-hw/ide/piix.c
 hw/input/goldfish_events.c
 hw/input/goldfish_events_common.c
 hw/input/goldfish_rotary.c
-hw/input/pckbd.c
 hw/intc/apic.c
 hw/intc/apic_common.c
 hw/intc/goldfish_pic.c
-hw/intc/i8259.c
-hw/intc/i8259_common.c
 hw/intc/ioapic.c
-hw/intc/ioapic_common.c
-hw/ipmi/ipmi.c
-hw/ipmi/ipmi_bmc_extern.c
-hw/ipmi/ipmi_bmc_sim.c
-hw/ipmi/isa_ipmi_bt.c
-hw/ipmi/isa_ipmi_kcs.c
-hw/isa/apm.c
 hw/isa/lpc_ich9.c
-hw/mem/nvdimm.c
-hw/mem/pc-dimm.c
-hw/misc/applesmc.c
-hw/misc/debugexit.c
 hw/misc/goldfish_battery.c
 hw/misc/goldfish_pipe.c
 hw/misc/goldfish_pstore.c
 hw/misc/goldfish_sync.c
 hw/misc/mmio_interface.c
-hw/misc/pc-testdev.c
 hw/misc/pvpanic.c
-hw/misc/sga.c
-hw/net/ne2000-isa.c
 hw/net/vhost_net.c
 hw/net/virtio-net.c
-hw/net/vmxnet3.c
-hw/pci-bridge/pci_expander_bridge.c
-hw/pci-host/piix.c
-hw/pci-host/q35.c
 hw/scsi/virtio-scsi-dataplane.c
 hw/scsi/virtio-scsi.c
-hw/smbios/smbios_type_38.c
 hw/timer/goldfish_timer.c
-hw/timer/hpet.c
-hw/timer/i8254.c
-hw/timer/i8254_common.c
 hw/timer/mc146818rtc.c
-hw/tpm/tpm_crb.c
-hw/tpm/tpm_tis.c
 hw/virtio/virtio-balloon.c
 hw/virtio/virtio-crypto-pci.c
 hw/virtio/virtio-crypto.c
 hw/virtio/virtio.c
-hw/watchdog/wdt_ib700.c
 ioport.c
 memory.c
 memory_mapping.c
@@ -1832,6 +1094,8 @@ set_source_files_properties(${ANDROID_AUTOGEN}/hw/9pfs/trace.c PROPERTIES COMPIL
 
 set_source_files_properties(${ANDROID_AUTOGEN}/hw/alpha/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/alpha")
 
+set_source_files_properties(${ANDROID_AUTOGEN}/hw/arm/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/arm")
+
 set_source_files_properties(${ANDROID_AUTOGEN}/hw/hppa/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/hppa")
 
 set_source_files_properties(${ANDROID_AUTOGEN}/hw/i386/xen/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/i386/xen")
@@ -1856,6 +1120,8 @@ set_source_files_properties(${ANDROID_AUTOGEN}/hw/xen/trace.c PROPERTIES COMPILE
 
 set_source_files_properties(${ANDROID_AUTOGEN}/linux-user/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/linux-user")
 
+set_source_files_properties(${ANDROID_AUTOGEN}/target/arm/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/target/arm")
+
 set_source_files_properties(${ANDROID_AUTOGEN}/target/mips/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/target/mips")
 
 set_source_files_properties(${ANDROID_AUTOGEN}/target/ppc/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/target/ppc")
@@ -1867,7 +1133,7 @@ set_source_files_properties(${ANDROID_AUTOGEN}/target/sparc/trace.c PROPERTIES C
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/accel/accel.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/accel")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/accel/stubs/gvm-stub.c ${ANDROID_QEMU2_TOP_DIR}/accel/stubs/hvf-stub.c ${ANDROID_QEMU2_TOP_DIR}/accel/stubs/kvm-stub.c ${ANDROID_QEMU2_TOP_DIR}/accel/stubs/whpx-stub.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/accel/stubs/gvm-stub.c ${ANDROID_QEMU2_TOP_DIR}/accel/stubs/kvm-stub.c ${ANDROID_QEMU2_TOP_DIR}/accel/stubs/whpx-stub.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/accel/stubs")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/accel/tcg/cpu-exec-common.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/cpu-exec.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/cputlb.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/tcg-all.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/tcg-runtime-gvec.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/tcg-runtime.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/translate-all.c ${ANDROID_QEMU2_TOP_DIR}/accel/tcg/translator.c
@@ -1891,31 +1157,19 @@ ${ANDROID_AUTOGEN}/chardev/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOG
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/crypto/aes.c ${ANDROID_QEMU2_TOP_DIR}/crypto/afsplit.c ${ANDROID_QEMU2_TOP_DIR}/crypto/block-luks.c ${ANDROID_QEMU2_TOP_DIR}/crypto/block-qcow.c ${ANDROID_QEMU2_TOP_DIR}/crypto/block.c ${ANDROID_QEMU2_TOP_DIR}/crypto/cipher.c ${ANDROID_QEMU2_TOP_DIR}/crypto/desrfb.c ${ANDROID_QEMU2_TOP_DIR}/crypto/hash-glib.c ${ANDROID_QEMU2_TOP_DIR}/crypto/hash.c ${ANDROID_QEMU2_TOP_DIR}/crypto/hmac-glib.c ${ANDROID_QEMU2_TOP_DIR}/crypto/hmac.c ${ANDROID_QEMU2_TOP_DIR}/crypto/init.c ${ANDROID_QEMU2_TOP_DIR}/crypto/ivgen-essiv.c ${ANDROID_QEMU2_TOP_DIR}/crypto/ivgen-plain.c ${ANDROID_QEMU2_TOP_DIR}/crypto/ivgen-plain64.c ${ANDROID_QEMU2_TOP_DIR}/crypto/ivgen.c ${ANDROID_QEMU2_TOP_DIR}/crypto/pbkdf-stub.c ${ANDROID_QEMU2_TOP_DIR}/crypto/pbkdf.c ${ANDROID_QEMU2_TOP_DIR}/crypto/random-platform.c ${ANDROID_QEMU2_TOP_DIR}/crypto/secret.c ${ANDROID_QEMU2_TOP_DIR}/crypto/tlscreds.c ${ANDROID_QEMU2_TOP_DIR}/crypto/tlscredsanon.c ${ANDROID_QEMU2_TOP_DIR}/crypto/tlscredsx509.c ${ANDROID_QEMU2_TOP_DIR}/crypto/tlssession.c ${ANDROID_QEMU2_TOP_DIR}/crypto/xts.c
 ${ANDROID_AUTOGEN}/crypto/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/crypto")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/disas/arm-a64.cc ${ANDROID_QEMU2_TOP_DIR}/disas/arm.c ${ANDROID_QEMU2_TOP_DIR}/disas/i386.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/disas/i386.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/disas")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/disas/libvixl/vixl/a64/decoder-a64.cc ${ANDROID_QEMU2_TOP_DIR}/disas/libvixl/vixl/a64/disasm-a64.cc ${ANDROID_QEMU2_TOP_DIR}/disas/libvixl/vixl/a64/instructions-a64.cc
-PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/disas/libvixl/vixl/a64")
-
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/disas/libvixl/vixl/compiler-intrinsics.cc ${ANDROID_QEMU2_TOP_DIR}/disas/libvixl/vixl/utils.cc
-PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/disas/libvixl/vixl")
-
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/fpu/softfloat.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/fpu")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/acpi/acpi-stub.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/acpi_interface.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/aml-build.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/bios-linker-loader.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/cpu.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/cpu_hotplug.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/ich9.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/ipmi-stub.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/ipmi.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/memory_hotplug.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/nvdimm.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/pcihp.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/piix4.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/tco.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/vmgenid.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/acpi/acpi_interface.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/aml-build.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/bios-linker-loader.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/cpu.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/cpu_hotplug.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/ich9.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/ipmi.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/memory_hotplug.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/nvdimm.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/pcihp.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/piix4.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/tco.c ${ANDROID_QEMU2_TOP_DIR}/hw/acpi/vmgenid.c
 ${ANDROID_AUTOGEN}/hw/acpi/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/acpi")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/adc/stm32f2xx_adc.c
-PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/adc")
-
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/arm/allwinner-a10.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/armv7m.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/aspeed.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/aspeed_soc.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/bcm2835_peripherals.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/bcm2836.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/boot.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/collie.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/cubieboard.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/digic.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/digic_boards.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/exynos4210.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/exynos4_boards.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/fsl-imx25.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/fsl-imx31.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/fsl-imx6.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/fsl-imx7.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/gumstix.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/highbank.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/imx25_pdk.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/integratorcp.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/iotkit.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/kzm.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/mainstone.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/mcimx7d-sabre.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/mps2-tz.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/mps2.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/msf2-soc.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/msf2-som.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/musicpal.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/netduino2.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/nseries.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/omap1.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/omap2.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/omap_sx1.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/palm.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/pxa2xx.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/pxa2xx_gpio.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/pxa2xx_pic.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/ranchu.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/raspi.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/realview.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/sabrelite.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/spitz.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/stellaris.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/stm32f205_soc.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/strongarm.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/sysbus-fdt.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/tosa.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/versatilepb.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/vexpress.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/virt-acpi-build.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/virt.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/xilinx_zynq.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/xlnx-zcu102.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/xlnx-zynqmp.c ${ANDROID_QEMU2_TOP_DIR}/hw/arm/z2.c
-${ANDROID_AUTOGEN}/hw/arm/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/arm")
-
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/audio/ac97.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/adlib.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/cs4231a.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/es1370.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/fmopl.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/goldfish_audio.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/gus.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/gusemu_hal.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/gusemu_mixer.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/hda-codec.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/intel-hda.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/lm4549.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/marvell_88w8618.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/pcspk.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/pl041.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/sb16.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/soundhw.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/wm8750.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/audio/ac97.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/adlib.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/cs4231a.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/es1370.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/fmopl.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/goldfish_audio.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/gus.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/gusemu_hal.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/gusemu_mixer.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/hda-codec.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/intel-hda.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/pcspk.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/sb16.c ${ANDROID_QEMU2_TOP_DIR}/hw/audio/soundhw.c
 ${ANDROID_AUTOGEN}/hw/audio/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/audio")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/block/block.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/cdrom.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/ecc.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/fdc.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/hd-geometry.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/m25p80.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/nand.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/nvme.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/onenand.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/pflash_cfi01.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/pflash_cfi02.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/virtio-blk.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/block/block.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/cdrom.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/fdc.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/hd-geometry.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/nvme.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/pflash_cfi01.c ${ANDROID_QEMU2_TOP_DIR}/hw/block/virtio-blk.c
 ${ANDROID_AUTOGEN}/hw/block/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/block")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/block/dataplane/virtio-blk.c
@@ -1924,37 +1178,34 @@ ${ANDROID_AUTOGEN}/hw/block/dataplane/trace.c PROPERTIES COMPILE_FLAGS " -I ${AN
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/bt/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/bt/hci-csr.c ${ANDROID_QEMU2_TOP_DIR}/hw/bt/hci.c ${ANDROID_QEMU2_TOP_DIR}/hw/bt/hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/bt/l2cap.c ${ANDROID_QEMU2_TOP_DIR}/hw/bt/sdp.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/bt")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/char/bcm2835_aux.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/cadence_uart.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/cmsdk-apb-uart.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/debugcon.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/digic-uart.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/exynos4210_uart.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/goldfish_tty.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/imx_serial.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/ipoctal232.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/omap_uart.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/parallel-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/parallel.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/pl011.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/serial-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/serial-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/serial.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/stm32f2xx_usart.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/virtio-console.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/virtio-serial-bus.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/char/debugcon.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/goldfish_tty.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/ipoctal232.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/parallel-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/parallel.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/serial-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/serial-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/serial.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/virtio-console.c ${ANDROID_QEMU2_TOP_DIR}/hw/char/virtio-serial-bus.c
 ${ANDROID_AUTOGEN}/hw/char/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/char")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/core/bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/fw-path-provider.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/generic-loader.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/hotplug.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/irq.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/loader.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/machine.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/nmi.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/null-machine.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/or-irq.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/platform-bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/ptimer.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev-fw.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev-properties-system.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev-properties.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/register.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/reset.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/split-irq.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/stream.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/sysbus.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/core/bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/fw-path-provider.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/generic-loader.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/hotplug.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/irq.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/loader.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/machine.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/nmi.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/null-machine.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/or-irq.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev-fw.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev-properties-system.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev-properties.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/qdev.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/register.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/reset.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/split-irq.c ${ANDROID_QEMU2_TOP_DIR}/hw/core/sysbus.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/core")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/cpu/a15mpcore.c ${ANDROID_QEMU2_TOP_DIR}/hw/cpu/a9mpcore.c ${ANDROID_QEMU2_TOP_DIR}/hw/cpu/arm11mpcore.c ${ANDROID_QEMU2_TOP_DIR}/hw/cpu/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/cpu/realview_mpcore.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/cpu/core.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/cpu")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/display/ads7846.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/bcm2835_fb.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/blizzard.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/cirrus_vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/dpcd.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/edid-generate.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/exynos4210_fimd.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/framebuffer.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/goldfish_fb.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/omap_dss.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/omap_lcdc.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/pl110.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/pxa2xx_lcd.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/sii9022.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/ssd0303.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/ssd0323.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/tc6393xb.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vga-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vga-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-gpu-3d.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-gpu-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-gpu.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vmware_vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/xlnx_dp.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/display/cirrus_vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/edid-generate.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/framebuffer.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/goldfish_fb.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vga-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vga-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-gpu-3d.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-gpu-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-gpu.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/virtio-vga.c ${ANDROID_QEMU2_TOP_DIR}/hw/display/vmware_vga.c
 ${ANDROID_AUTOGEN}/hw/display/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/display")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/dma/bcm2835_dma.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/i8257.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/omap_dma.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/pl080.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/pl330.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/pxa2xx_dma.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/soc_dma.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/xilinx_axidma.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/xlnx-zynq-devcfg.c ${ANDROID_QEMU2_TOP_DIR}/hw/dma/xlnx_dpdma.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/dma/i8257.c
 ${ANDROID_AUTOGEN}/hw/dma/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/dma")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/gpio/bcm2835_gpio.c ${ANDROID_QEMU2_TOP_DIR}/hw/gpio/gpio_key.c ${ANDROID_QEMU2_TOP_DIR}/hw/gpio/imx_gpio.c ${ANDROID_QEMU2_TOP_DIR}/hw/gpio/max7310.c ${ANDROID_QEMU2_TOP_DIR}/hw/gpio/omap_gpio.c ${ANDROID_QEMU2_TOP_DIR}/hw/gpio/pl061.c ${ANDROID_QEMU2_TOP_DIR}/hw/gpio/zaurus.c
-PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/gpio")
-
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/i2c/aspeed_i2c.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/bitbang_i2c.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/exynos4210_i2c.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/i2c-ddc.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/imx_i2c.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/omap_i2c.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/pm_smbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/smbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/smbus_eeprom.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/smbus_ich9.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/versatile_i2c.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/i2c/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/pm_smbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/smbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/smbus_eeprom.c ${ANDROID_QEMU2_TOP_DIR}/hw/i2c/smbus_ich9.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/i2c")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/i386/amd_iommu.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/intel_iommu.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/kvmvapic.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/multiboot.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/pc.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/pc_q35.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/pc_sysfw.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/vmmouse.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/vmport.c ${ANDROID_QEMU2_TOP_DIR}/hw/i386/x86-iommu.c
 ${ANDROID_AUTOGEN}/hw/i386/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/i386")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/ide/ahci-allwinner.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/ahci.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/atapi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/ich.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/microdrive.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/piix.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/qdev.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/ide/ahci.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/atapi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/ich.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/piix.c ${ANDROID_QEMU2_TOP_DIR}/hw/ide/qdev.c
 ${ANDROID_AUTOGEN}/hw/ide/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/ide")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/input/goldfish_events.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/goldfish_events_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/goldfish_rotary.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/lm832x.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/pckbd.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/pl050.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/ps2.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/pxa2xx_keypad.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/stellaris_input.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/tsc2005.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/tsc210x.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/virtio-input-hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/virtio-input.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/input/goldfish_events.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/goldfish_events_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/goldfish_rotary.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/pckbd.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/ps2.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/virtio-input-hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/input/virtio-input.c
 ${ANDROID_AUTOGEN}/hw/input/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/input")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/intc/allwinner-a10-pic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/apic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/apic_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gic_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv2m.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv3.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv3_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv3_cpuif.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv3_dist.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv3_its_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/arm_gicv3_redist.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/armv7m_nvic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/aspeed_vic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/bcm2835_ic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/bcm2836_control.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/exynos4210_combiner.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/exynos4210_gic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/goldfish_pic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/i8259.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/i8259_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/imx_avic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/imx_gpcv2.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/intc.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/ioapic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/ioapic_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/omap_intc.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/pl190.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/realview_gic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/xlnx-pmu-iomod-intc.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/xlnx-zynqmp-ipi.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/intc/apic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/apic_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/goldfish_pic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/i8259.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/i8259_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/intc.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/ioapic.c ${ANDROID_QEMU2_TOP_DIR}/hw/intc/ioapic_common.c
 ${ANDROID_AUTOGEN}/hw/intc/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/intc")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/ipack/ipack.c ${ANDROID_QEMU2_TOP_DIR}/hw/ipack/tpci200.c
@@ -1969,15 +1220,15 @@ ${ANDROID_AUTOGEN}/hw/isa/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGE
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/mem/nvdimm.c ${ANDROID_QEMU2_TOP_DIR}/hw/mem/pc-dimm.c
 ${ANDROID_AUTOGEN}/hw/mem/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/mem")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/misc/a9scu.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/applesmc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/arm11scu.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/arm_integrator_debug.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/arm_l2x0.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/arm_sysctl.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/aspeed_scu.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/aspeed_sdmc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/auxbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/bcm2835_mbox.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/bcm2835_property.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/bcm2835_rng.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/cbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/debugexit.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/edu.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/exynos4210_clk.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/exynos4210_pmu.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/exynos4210_rng.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_battery.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_pipe.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_pstore.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_sync.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx25_ccm.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx2_wdt.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx31_ccm.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx6_ccm.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx6_src.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx7_ccm.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx7_gpr.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx7_snvs.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/imx_ccm.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/iotkit-secctl.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/max111x.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/mmio_interface.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/mps2-fpgaio.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/mps2-scc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/msf2-sysreg.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/mst_fpga.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/omap_clk.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/omap_gpmc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/omap_l4.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/omap_sdrc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/omap_tap.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/pc-testdev.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/pci-testdev.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/pvpanic.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/sga.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/stm32f2xx_syscfg.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/tmp105.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/tmp421.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/tz-ppc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/unimp.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/vmcoreinfo.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/zynq-xadc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/zynq_slcr.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/misc/applesmc.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/debugexit.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/edu.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_battery.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_pipe.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_pstore.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/goldfish_sync.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/mmio_interface.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/pc-testdev.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/pci-testdev.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/pvpanic.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/sga.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/unimp.c ${ANDROID_QEMU2_TOP_DIR}/hw/misc/vmcoreinfo.c
 ${ANDROID_AUTOGEN}/hw/misc/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/misc")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/net/allwinner_emac.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/cadence_gem.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/eepro100.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/ftgmac100.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/imx_fec.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/lan9118.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/ne2000-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/ne2000.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/net_rx_pkt.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/net_tx_pkt.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/pcnet-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/pcnet.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/rtl8139.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/smc91c111.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/stellaris_enet.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/vhost_net.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/virtio-net.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/vmxnet3.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/xgmac.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/xilinx_axienet.c
-${ANDROID_AUTOGEN}/hw/net/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/net")
-
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/net/can/can_kvaser_pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/can/can_mioe3680_pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/can/can_pcm3680_pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/can/can_sja1000.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/net/can")
 
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/net/eepro100.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/ne2000-isa.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/ne2000.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/net_rx_pkt.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/net_tx_pkt.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/pcnet-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/pcnet.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/rtl8139.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/vhost_net.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/virtio-net.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/vmxnet3.c
+${ANDROID_AUTOGEN}/hw/net/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/net")
+
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/net/rocker/rocker.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/rocker/rocker_desc.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/rocker/rocker_fp.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/rocker/rocker_of_dpa.c ${ANDROID_QEMU2_TOP_DIR}/hw/net/rocker/rocker_world.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/net/rocker")
 
@@ -1987,40 +1238,37 @@ ${ANDROID_AUTOGEN}/hw/nvram/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTO
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/gen_pcie_root_port.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/i82801b11.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/ioh3420.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/pci_bridge_dev.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/pci_expander_bridge.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/pcie_pci_bridge.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/pcie_root_port.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/xio3130_downstream.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-bridge/xio3130_upstream.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/pci-bridge")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/designware.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/gpex.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/pam.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/piix.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/q35.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/versatile.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/pam.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/piix.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci-host/q35.c
 ${ANDROID_AUTOGEN}/hw/pci-host/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/pci-host")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/pci/msi.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/msix.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pci_bridge.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pci_host.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pcie.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pcie_aer.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pcie_host.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/pcie_port.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/shpc.c ${ANDROID_QEMU2_TOP_DIR}/hw/pci/slotid_cap.c
 ${ANDROID_AUTOGEN}/hw/pci/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/pci")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/pcmcia/pcmcia.c ${ANDROID_QEMU2_TOP_DIR}/hw/pcmcia/pxa2xx.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/pcmcia/pcmcia.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/pcmcia")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/scsi/esp-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/esp.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/lsi53c895a.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/megasas.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/mptconfig.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/mptendian.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/mptsas.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/scsi-bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/scsi-disk.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/scsi-generic.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/virtio-scsi-dataplane.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/virtio-scsi.c ${ANDROID_QEMU2_TOP_DIR}/hw/scsi/vmw_pvscsi.c
 ${ANDROID_AUTOGEN}/hw/scsi/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/scsi")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/sd/bcm2835_sdhost.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/omap_mmc.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/pl181.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/pxa2xx_mmci.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/sd.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/sdhci.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/sdmmc-internal.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/ssi-sd.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/sd/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/sd.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/sdhci.c ${ANDROID_QEMU2_TOP_DIR}/hw/sd/sdmmc-internal.c
 ${ANDROID_AUTOGEN}/hw/sd/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/sd")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/smbios/smbios.c ${ANDROID_QEMU2_TOP_DIR}/hw/smbios/smbios_type_38-stub.c ${ANDROID_QEMU2_TOP_DIR}/hw/smbios/smbios_type_38.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/smbios/smbios.c ${ANDROID_QEMU2_TOP_DIR}/hw/smbios/smbios_type_38.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/smbios")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/ssi/aspeed_smc.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/imx_spi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/mss-spi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/omap_spi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/pl022.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/ssi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/stm32f2xx_spi.c ${ANDROID_QEMU2_TOP_DIR}/hw/ssi/xilinx_spips.c
-PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/ssi")
-
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/timer/a9gtimer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/allwinner-a10-pit.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/arm_mptimer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/arm_timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/armv7m_systick.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/aspeed_timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/cadence_ttc.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/cmsdk-apb-timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/digic-timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/ds1338.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/exynos4210_mct.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/exynos4210_pwm.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/exynos4210_rtc.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/goldfish_timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/hpet.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/i8254.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/i8254_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/imx_epit.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/imx_gpt.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/mc146818rtc.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/mss-timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/omap_gptimer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/omap_synctimer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/pl031.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/pxa2xx_timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/stm32f2xx_timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/twl92230.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/xlnx-zynqmp-rtc.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/timer/goldfish_timer.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/hpet.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/i8254.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/i8254_common.c ${ANDROID_QEMU2_TOP_DIR}/hw/timer/mc146818rtc.c
 ${ANDROID_AUTOGEN}/hw/timer/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/timer")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/tpm/tpm_crb.c ${ANDROID_QEMU2_TOP_DIR}/hw/tpm/tpm_emulator.c ${ANDROID_QEMU2_TOP_DIR}/hw/tpm/tpm_tis.c ${ANDROID_QEMU2_TOP_DIR}/hw/tpm/tpm_util.c
 ${ANDROID_AUTOGEN}/hw/tpm/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/tpm")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/usb/bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/chipidea.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/combined-packet.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/desc-msos.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/desc.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-audio.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-bluetooth.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-hub.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-mtp.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-network.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-serial.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-smartcard-reader.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-storage.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-uas.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-wacom.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ehci-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ehci-sysbus.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ehci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-musb.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ohci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-uhci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-xhci-nec.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-xhci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/host-libusb.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/libhw.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/tusb6010.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/usb/bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/combined-packet.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/core.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/desc-msos.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/desc.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-audio.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-bluetooth.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-hid.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-hub.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-mtp.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-network.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-serial.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-smartcard-reader.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-storage.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-uas.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/dev-wacom.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ehci-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ehci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-ohci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-uhci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-xhci-nec.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/hcd-xhci.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/host-libusb.c ${ANDROID_QEMU2_TOP_DIR}/hw/usb/libhw.c
 ${ANDROID_AUTOGEN}/hw/usb/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/usb")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/virtio/vhost-stub.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-balloon.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-bus.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-crypto-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-crypto.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-mmio.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-pci.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio-rng.c ${ANDROID_QEMU2_TOP_DIR}/hw/virtio/virtio.c
 ${ANDROID_AUTOGEN}/hw/virtio/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/virtio")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/watchdog.c ${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/wdt_aspeed.c ${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/wdt_i6300esb.c ${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/wdt_ib700.c
+set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/watchdog.c ${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/wdt_i6300esb.c ${ANDROID_QEMU2_TOP_DIR}/hw/watchdog/wdt_ib700.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/hw/watchdog")
 
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/io/channel-buffer.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-command.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-file.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-socket.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-tls.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-util.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-watch.c ${ANDROID_QEMU2_TOP_DIR}/io/channel-websock.c ${ANDROID_QEMU2_TOP_DIR}/io/channel.c ${ANDROID_QEMU2_TOP_DIR}/io/dns-resolver.c ${ANDROID_QEMU2_TOP_DIR}/io/net-listener.c ${ANDROID_QEMU2_TOP_DIR}/io/task.c
@@ -2059,9 +1307,6 @@ PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/slirp")
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/stubs/arch-query-cpu-def.c ${ANDROID_QEMU2_TOP_DIR}/stubs/arch-query-cpu-model-baseline.c ${ANDROID_QEMU2_TOP_DIR}/stubs/arch-query-cpu-model-comparison.c ${ANDROID_QEMU2_TOP_DIR}/stubs/arch-query-cpu-model-expansion.c ${ANDROID_QEMU2_TOP_DIR}/stubs/bdrv-next-monitor-owned.c ${ANDROID_QEMU2_TOP_DIR}/stubs/blk-commit-all.c ${ANDROID_QEMU2_TOP_DIR}/stubs/blockdev-close-all-bdrv-states.c ${ANDROID_QEMU2_TOP_DIR}/stubs/change-state-handler.c ${ANDROID_QEMU2_TOP_DIR}/stubs/clock-warp.c ${ANDROID_QEMU2_TOP_DIR}/stubs/cpu-get-clock.c ${ANDROID_QEMU2_TOP_DIR}/stubs/cpu-get-icount.c ${ANDROID_QEMU2_TOP_DIR}/stubs/dump.c ${ANDROID_QEMU2_TOP_DIR}/stubs/error-printf.c ${ANDROID_QEMU2_TOP_DIR}/stubs/fdset.c ${ANDROID_QEMU2_TOP_DIR}/stubs/gdbstub.c ${ANDROID_QEMU2_TOP_DIR}/stubs/get-vm-name.c ${ANDROID_QEMU2_TOP_DIR}/stubs/iothread-lock.c ${ANDROID_QEMU2_TOP_DIR}/stubs/iothread.c ${ANDROID_QEMU2_TOP_DIR}/stubs/is-daemonized.c ${ANDROID_QEMU2_TOP_DIR}/stubs/machine-init-done.c ${ANDROID_QEMU2_TOP_DIR}/stubs/migr-blocker.c ${ANDROID_QEMU2_TOP_DIR}/stubs/migration.c ${ANDROID_QEMU2_TOP_DIR}/stubs/monitor.c ${ANDROID_QEMU2_TOP_DIR}/stubs/pc_madt_cpu_entry.c ${ANDROID_QEMU2_TOP_DIR}/stubs/pci-host-piix.c ${ANDROID_QEMU2_TOP_DIR}/stubs/qmp_pc_dimm.c ${ANDROID_QEMU2_TOP_DIR}/stubs/qtest.c ${ANDROID_QEMU2_TOP_DIR}/stubs/ram-block.c ${ANDROID_QEMU2_TOP_DIR}/stubs/replay.c ${ANDROID_QEMU2_TOP_DIR}/stubs/runstate-check.c ${ANDROID_QEMU2_TOP_DIR}/stubs/slirp.c ${ANDROID_QEMU2_TOP_DIR}/stubs/sysbus.c ${ANDROID_QEMU2_TOP_DIR}/stubs/target-get-monitor-def.c ${ANDROID_QEMU2_TOP_DIR}/stubs/target-monitor-defs.c ${ANDROID_QEMU2_TOP_DIR}/stubs/tpm.c ${ANDROID_QEMU2_TOP_DIR}/stubs/trace-control.c ${ANDROID_QEMU2_TOP_DIR}/stubs/uuid.c ${ANDROID_QEMU2_TOP_DIR}/stubs/vm-stop.c ${ANDROID_QEMU2_TOP_DIR}/stubs/vmgenid.c ${ANDROID_QEMU2_TOP_DIR}/stubs/vmstate.c ${ANDROID_QEMU2_TOP_DIR}/stubs/xen-common.c ${ANDROID_QEMU2_TOP_DIR}/stubs/xen-hvm.c
 PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/stubs")
 
-set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/target/arm/arch_dump.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/arm-powerctl.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/arm-semi.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/cpu.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/cpu64.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/crypto_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/gdbstub.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/gdbstub64.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/helper-a64.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/helper.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/iwmmxt_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/kvm-stub.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/machine.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/monitor.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/neon_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/op_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/psci.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/translate-a64.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/translate.c ${ANDROID_QEMU2_TOP_DIR}/target/arm/vec_helper.c
-${ANDROID_AUTOGEN}/target/arm/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/target/arm")
-
 set_source_files_properties(${ANDROID_QEMU2_TOP_DIR}/target/i386/arch_dump.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/arch_memory_mapping.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/bpt_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/cc_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/cpu.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/excp_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/fpu_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/gdbstub.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/hax-all.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/hax-darwin.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/hax-mem.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/hvf-all.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/int_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/kvm-stub.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/machine.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/mem_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/misc_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/monitor.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/mpx_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/seg_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/sev-stub.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/smm_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/svm_helper.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/translate.c ${ANDROID_QEMU2_TOP_DIR}/target/i386/xsave_helper.c
 ${ANDROID_AUTOGEN}/target/i386/trace.c PROPERTIES COMPILE_FLAGS " -I ${ANDROID_AUTOGEN}/target/i386")
 
diff --git a/target/i386/cpu.c b/target/i386/cpu.c
index b6ae8c790a..4fe026e98d 100644
--- a/target/i386/cpu.c
+++ b/target/i386/cpu.c
@@ -5053,11 +5053,16 @@ static void x86_cpu_update_enable_features(X86CPUDefinition *cpus,
 {
     X86CPUDefinition *cpu = x86_cpu_find(cpus, cpus_size, cpu_name);
     if (cpu) {
+#if defined(__x86_64__) || defined(__i386__)
         uint32_t eax, ebx, ecx, edx;
         host_cpuid(1, 0, &eax, &ebx, &ecx, &edx);
 
         cpu->features[FEAT_1_ECX] |= (ecx & extra_ecx);
         cpu->features[FEAT_1_EDX] |= (edx & extra_edx);
+#else
+        cpu->features[FEAT_1_ECX] |= extra_ecx;
+        cpu->features[FEAT_1_EDX] |= extra_edx;
+#endif
     }
 }
 
@@ -5070,9 +5075,11 @@ static void x86_cpu_register_types(void)
                                    /* Extra ECX bits */
                                    CPUID_EXT_AES |
                                    CPUID_EXT_PCLMULQDQ |
-                                   CPUID_EXT_XSAVE |
+                                   CPUID_EXT_XSAVE,
+                                   /* TCG doesn't support these
                                    CPUID_EXT_AVX |
                                    CPUID_EXT_F16C,
+                                   */
                                    /* Extra EDX bits */
                                    CPUID_FXSR
     );
